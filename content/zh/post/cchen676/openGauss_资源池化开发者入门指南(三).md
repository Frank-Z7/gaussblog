+++
title = "openGauss资源池化开发者入门指南(三)" 
date = "2023-02-08" 
tags = ["openGauss使用增强"] 
archives = "2023-02" 
author = "cchen676" 
summary = "openGauss资源池化开发者入门指南"
img = "/zh/post/cchen676/title/img26.png" 
times = "16:30"
+++
# openGauss资源池化开发者入门指南(三)

### 一、内容简介

openGauss资源池化是openGauss推出的一种新型的集群架构.通过DMS和DSS组件,实现集群中多个节点的底层存储数据共享和节点间的内存实时共享

达到节省底层存储资源以及集群内部支持一写多读且可以实时一致性读的目的.

本系列的主旨在于帮助对资源池化开发感兴趣的开发者快速入门

以及提供一些对开发有帮助的经验总结

### 二、预备知识

开发者最好具备以下基础:
1. Linux的基础命令，比如dd命令，iscis等
2. 对磁阵有一定的了解
3. 对传统的openGauss编译方式十分熟悉
4. 对数据库基本知识有一定的了解

### 三、当前的一些约束说明

  1. 资源池化架构参考:
  ![图1](/content/zh/post/cchen676/title/dms1.JPG "图1")
  2. 在社区正式发布的版本中, 如果需要搭建资源池化架构, 硬件上需要准备磁阵, 服务器和光交换机.
  3. 在社区正式发布的版本中,  CM和OM是必选的组件
  4. 下面对基于资源池化架构下的数据库使用时, 存在的一些业务上约束进行一些说明, 需要注意的是**当前的约束不代表以后一直不支持**, 只是由于当前初版设计上的考虑, 做出的一些约束
  
| 编号 |  约束说明 | 补充说明 |
|:--:|:--|:--|
| 1 | 仅支持段页式存储, 不支持页式 | 建表语句需要带上with (segment = on, xxx) |
| 2 | 不支持列存表 | 无 |
| 3 | 不支持FDW | 无 |
| 4 | 不支持unlogged表 | 无 |
| 5 | 不支持本地临时表和全局临时表 | 无 |
| 6 | 不支持带压缩的特性 | 无 |
| 7 | 不支持物化视图 | 无 |
| 8 | 备机不支持开启事务的操作 | 无 |
| 9 | 不支持XA事务 | 无 |
| 10 | 使用OM安装时仅支持磁阵方式部署, 不支持ceph, 不支持虚拟化存储池 | 无 |
| 11 | 不支持发布订阅 | 无 |
| 12 | 不支持传统主备架构同时部署 | 即同一套集群不能既使用资源池化主备, 又配上传统主备, 也就是不支持replconninfo或hot_standby这些 |
| 13 | 不支持ustore | 当然也不支持闪回 |
| 14 | 单个xlog的文件大小从16MB调整成了1G | 回收机制也适配了1G, pg_xlogdump工具也进行了适配 |
| 15 | 不支持两阶段提交 | 即不支持PREPARE TRANSACTION这种语句 |
| 16 | 不建议关闭global syscache | 默认是打开的, 通过配置项可以关闭, 关闭后高并发下目前可能导致连接变慢, 后续会解决 |
| 17 | 不支持新建修改删除复制槽的操作 | 同12 |
