+++<br />title="openGauss社区入门(opengauss-导入导出（copy）)"<br />date="2022-09-23"<br />tags=["openGauss社区开发入门"]<br />archives="2022-09"<br />author="wangrururu"<br />summary="openGauss社区开发入门"<br />img="/zh/post/wzr/title/title.jpg"<br />times="12：08"<br />+++<br />COPY  命令可以使表和文件之间交换数据，有两种用法：

- COPY TO：把一个表的所有内容都拷贝到一个文件，还可拷贝select查询的结果
- COPY FROM:从一个文件里拷贝数据到一个表里

其语法格式为：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934483248-5cd40a79-9f8d-4614-92b4-58a714f9ea62.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=613&id=u14efb006&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=919&originalType=binary&ratio=1&rotation=0&showTitle=false&size=390774&status=error&style=none&taskId=u54605cc4-d0d3-4549-9f4b-8808ce8827c&title=&width=735.2)<br />用法如下：<br />1.将一个表拷贝到客户端，使用竖线(|)作为域分隔符：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934555311-830c8399-c0b1-49fd-a078-66c13cccc155.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=318&id=uce171067&margin=%5Bobject%20Object%5D&name=image.png&originHeight=397&originWidth=1706&originalType=binary&ratio=1&rotation=0&showTitle=false&size=806686&status=error&style=none&taskId=uf65d02d8-f87f-4e29-8e6c-bf2566cc240&title=&width=1364.8)<br />2.从.txt文件中拷贝数据到country表<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934587781-2dd40467-5496-4c4e-945b-803345db8d4f.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=464&id=udc655331&margin=%5Bobject%20Object%5D&name=image.png&originHeight=580&originWidth=1670&originalType=binary&ratio=1&rotation=0&showTitle=false&size=398500&status=error&style=none&taskId=ucec6879d-c32e-41ae-8475-2b2e2834dfb&title=&width=1336)<br />3.把‘埃’开头的国家名拷贝到一个sql文件里；再将此sql文件导入到表country中。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934628830-90908f61-4939-4aea-a901-38505a743cd8.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=135&id=u37f76230&margin=%5Bobject%20Object%5D&name=image.png&originHeight=169&originWidth=1968&originalType=binary&ratio=1&rotation=0&showTitle=false&size=309943&status=error&style=none&taskId=u5bfe8b4a-99fc-4db9-a1fb-b0b9a61ddda&title=&width=1574.4)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934636707-168ae620-205d-4a5f-8b78-27bfe9faeed5.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=384&id=u57928a13&margin=%5Bobject%20Object%5D&name=image.png&originHeight=480&originWidth=497&originalType=binary&ratio=1&rotation=0&showTitle=false&size=192112&status=error&style=none&taskId=ua61c8f11-f2b5-48ac-9438-3c30abdb780&title=&width=397.6)<br />4.将execl表中数据导入到country表中：<br />（1）将excel表格字段按照数据库中表的字段顺序整理数据，并保存为csv文件。<br />（2）用记事本打开csv文件，另存为UTF-8格式。<br />（3）给用户execl表的读写权限<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934713281-72d05203-2b98-4c48-b70b-29b60d4dc714.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=344&id=u532a299e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=430&originWidth=1392&originalType=binary&ratio=1&rotation=0&showTitle=false&size=407294&status=error&style=none&taskId=u0809a9da-e637-4ce9-b707-992cf6f14cf&title=&width=1113.6)<br />5.Log errors：<br />（1）创建日志select copy_error_log_create();<br />（2）使用<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934815006-9556416e-dd6e-43e1-87a9-6de1c6d3aa9a.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=481&id=u205d84c0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=601&originWidth=1855&originalType=binary&ratio=1&rotation=0&showTitle=false&size=545485&status=error&style=none&taskId=u9f182cfb-2b95-4d0a-8c2d-70b1e77cf82&title=&width=1484)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/32435345/1663934783615-4d2d203a-4a9a-4357-9f62-70c88943a032.png#clientId=uf7186fc9-316d-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=paste&height=191&id=uf8955bb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=239&originWidth=1832&originalType=binary&ratio=1&rotation=0&showTitle=false&size=411247&status=error&style=none&taskId=uc97f56e8-08e9-4c05-bb16-c3fede613a9&title=&width=1465.6)
